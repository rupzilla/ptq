exports.flash = function(default_obj) {
	if (typeof(default_obj) === 'undefined') {
		default_obj = {
			error: null,
			errors: {},
			info: null,
			infos: {}
		}
	}
	return function(req, res, next) {
		if (!req.session.flash) {
			req.session.flash = default_obj
		}

		res.locals.flash = req.session.flash

		var _render = res.render
		res.render = function() {
			_render.apply(res, arguments)
			req.session.flash = default_obj
		}
		
		next()
	}
}